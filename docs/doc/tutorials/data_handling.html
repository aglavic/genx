
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data handling &#8212; GenX 3.7.11 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="shortcut icon" href="../_static/genx.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fitting with Differential Evolution" href="diffev.html" />
    <link rel="prev" title="Plugins: an introduction" href="plugin.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="diffev.html" title="Fitting with Differential Evolution"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plugin.html" title="Plugins: an introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GenX 3.7.11 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../tutorials.html" accesskey="U">Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Data handling</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="data-handling">
<span id="tutorial-data-handling"></span><h1>Data handling<a class="headerlink" href="#data-handling" title="Permalink to this headline">¶</a></h1>
<section id="adding-removing">
<h2>Adding/Removing<a class="headerlink" href="#adding-removing" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../_images/data_tab.png"><img alt="../_images/data_tab.png" src="../_images/data_tab.png" style="width: 40%;" /></a>
<p>A data set can be added by using the green cross above the list of data sets in the data tab (leftmost notebook),
see picture above.
In the same manner one or several data sets can be deleted (no undo) by pressing the red cross next to the blue arrows.
A dialog will appear to make sure that you really want to remove the data set. The data sets can also be moved up and
down in the list by using the two blue arrows.</p>
<p>It is possible to change the name of the current data set in order to make it more human readable. This is done
by double clicking or clicking twice (platform dependent, I believe) on the dataset name.
You can look at possible meta data that was imported by pressing the blue information button.</p>
<p>Lastly, the three different columns after name in the data list shows the status for each data set with regards
to plotting and fitting. The following list will explain them:</p>
<dl class="simple">
<dt>Show</dt><dd><p>Whether or not to plot the dataset in the plot window. If Yes it will be plotted.</p>
</dd>
<dt>Use</dt><dd><p>If the dataset should be used to calculate the Figure of merit FOM. If Yes it is used. This is for fitting.</p>
</dd>
<dt>Use Error</dt><dd><p>If the error bars on the data should be used in <em>both</em> plotting and fitting. The fitting part only works
if the FOM function supports it, i.e. Chi2 functions and similar. The error bars will only be displayed when
the data is simulated. During fitting they will not be shown due to performance issues with the plotting.</p>
</dd>
</dl>
<p>These states can be toggled (switched between yes and no) by right clicking on the data set and choose the
right menu item in the pop-up menu.</p>
<a class="reference internal image-reference" href="../_images/right_click.png"><img alt="../_images/right_click.png" src="../_images/right_click.png" style="width: 40%;" /></a>
<p>There are also keyboard shortcuts for these if you need to access them
frequently, see the menu <span class="menuselection">Edit‣Data</span>.</p>
<a class="reference internal image-reference" href="../_images/data_menu.png"><img alt="../_images/data_menu.png" src="../_images/data_menu.png" style="width: 40%;" /></a>
</section>
<section id="loading">
<h2>Loading<a class="headerlink" href="#loading" title="Permalink to this headline">¶</a></h2>
<p>Before loading data you should choose which data set to load the data into. This is done by simply marking the
data set in the list. Some loader support multiple datasets, if they are present in the file.
To load data click on the folder icon in the data tabs upper toolbar.
This will open up a file dialog that allows you to choose which file to load. Note that the behavior could be
customized if you use a different data loader plugin, see <a class="reference internal" href="gui.html#tutorial-gui"><span class="std std-ref">Overview of the  user interface</span></a>.</p>
<p>As a default the data to load is assumed to be two column ASCII format with the columns of x and y data
separated by any whitespace character, i.e., spaces and tabs. A comment should be preceded by a hash(#).
If you would like to change these parameters you can right click on any data set and choose
<span class="menuselection">Import settings</span> from the pop-up menu to change the behavior. It is also possible to choose
<span class="menuselection">Settings‣Data Loader</span> from the pull-down menu. This will make a dialog window to appear where the
data loading process can be customized. Here one should note that all columns and numbered 0, 1, 2 ….</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The numbering starts with 0!. Internally the numpy loadtxt function is used.</p>
</div>
</section>
<section id="viewing">
<h2>Viewing<a class="headerlink" href="#viewing" title="Permalink to this headline">¶</a></h2>
<p>As soon as a data set has been loaded this should be displayed in the main plot. If that is not the case something
has gone wrong. In these cases, and others too, the data can be viewed from the view tab in the leftmost notebook panel.
There are several columns here and the x_raw, y_raw, ye_raw represents the data as loaded directly from the source
file. The last column represents the displayed value after any Calculations/Transformations have been applied to the
data, see next section.</p>
</section>
<section id="calculations-transformations">
<h2>Calculations/Transformations<a class="headerlink" href="#calculations-transformations" title="Permalink to this headline">¶</a></h2>
<p>Here some useful expressions for treating the raw data are presented. The treatment can be defined by clicking on the
calculator button on the data toolbar to access the Data Calculations dialog, see below.</p>
<a class="reference internal image-reference" href="../_images/data_calculations_dialog.png"><img alt="../_images/data_calculations_dialog.png" src="../_images/data_calculations_dialog.png" style="width: 50%;" /></a>
<p>Any Python expression will work. (Based on numpy arrays.)
First of all to reset the data to the raw data write, x in the x field and y in the y field. The general
syntax for selecting data from an array is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">:</span><span class="n">step</span> <span class="n">size</span><span class="p">]</span>
</pre></div>
</div>
<p>If a special interval of the data needs to be fitted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="o">-</span><span class="mi">300</span><span class="p">]</span>
</pre></div>
</div>
<p>where the first value is the starting point (number of elements from the beginning) and the last is the end point.
A negative value means that the end point is calculated from the end of the array. In addition, if the number of
data points has to be decreased the expression above can be extended to include the step size:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="o">-</span><span class="mi">300</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>For more information about indexing <a class="reference external" href="http://www.scipy.org/Cookbook/Indexing">see</a>. Consequently with this
expression only every second data point is included. The operations shown here also need to be performed on the
y,error and any extra_data values.</p>
<p>It is also possible to conduct simple arithmetic operations on the data. For example transforming the
x data from degrees to Qz (scattering vector in reciprocal Angstrom), assuming that a wavelength of 1.54 Å is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">4</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">1.54</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="p">)</span>
</pre></div>
</div>
<p>This would then be typed into the text field for the x data.</p>
<p>Another common action is to calculate counting errors based on the input data. For data that is
imported directly in the unit of counts one would put into the <em>e</em> entry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Three special functions are provided by GenX for advanced data treatment. These are:</p>
<ul class="simple">
<li><p><strong>rms(e1,e2,e2,…)</strong> calculates the Root Mean Square of a set of error values. This is useful
when combining statistical errors from different sources.
(Like the ones calculated withe the two functions below.)</p></li>
<li><p><strong>fpe(max_x,rel_e)</strong> get the estimated foot print error that results from imperfect beam homogenity
in a angular-dispersive reflectivity experiment. Providing a relative error <em>rel_e</em> and maximum x-value
with footprint influence <em>max_x</em> the absolute error on y is calculated.</p></li>
<li><p><strong>dydx()</strong> calculates the numerical slope dy/dx for each datapoint. This can be used to estimate an
error on the simulated intensity that results from an error on the data-point x location by multiplying
with the standard deviation of the x-value.</p></li>
</ul>
<p>Use <span class="menuselection">Predefined‣Systematic Errors</span> to see an example use for an XRR measurement with
1° maximum footprint, 2% relative footprint error and 0.01 standard deviation of x-values for all
points.</p>
</div>
<p>The examples presented here are rather limited but hopefully to shows the flexibility of treating the data.
For a more detailed list of functions and syntax the
reader is referred to the tutorials and manuals found at <a class="reference external" href="www.scipy.org">scipy</a>.</p>
</section>
<section id="exporting">
<h2>Exporting<a class="headerlink" href="#exporting" title="Permalink to this headline">¶</a></h2>
<p>Data can be exported to four-column ASCII format (x, y, y_err, simulation) by using the menu
<span class="menuselection">File‣Export‣Export Data</span> and choosing a data name. Each dataset will be saved to an individual
file with a running number from 000, 001 … and upwards inserted before the given extension.
For example, if the name <code class="docutils literal notranslate"><span class="pre">export.dat</span></code> is given the output files will have the names <code class="docutils literal notranslate"><span class="pre">export000.dat</span></code>,
<code class="docutils literal notranslate"><span class="pre">export001.dat</span></code> and so on.</p>
<p>GenX now supports the new ORSO Open Reflectometry Text (.ort) ASCII format with additional metadata
from the imported datasets and GenX model. All datasets are included in a single text file by using the menu
<span class="menuselection">File‣Export‣Export ORT</span> and choosing a file name as <code class="docutils literal notranslate"><span class="pre">export.ort</span></code>.</p>
<p>Also, if you want to plot the data in another plotting program, such as Gnuplot, Excel, <a class="reference external" href="http://www.openoffice.org">OpenOffice</a>
or Origin. The data can be copied in a ASCII spreadsheet format directly to the clipboard.
This is done by using the menu <span class="menuselection">Edit‣Copy Simulation</span>. This will make all data sets in
4-column format after each other, column-wise.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Data handling</a><ul>
<li><a class="reference internal" href="#adding-removing">Adding/Removing</a></li>
<li><a class="reference internal" href="#loading">Loading</a></li>
<li><a class="reference internal" href="#viewing">Viewing</a></li>
<li><a class="reference internal" href="#calculations-transformations">Calculations/Transformations</a></li>
<li><a class="reference internal" href="#exporting">Exporting</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="plugin.html"
                        title="previous chapter">Plugins: an introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="diffev.html"
                        title="next chapter">Fitting with Differential Evolution</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorials/data_handling.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="diffev.html" title="Fitting with Differential Evolution"
             >next</a> |</li>
        <li class="right" >
          <a href="plugin.html" title="Plugins: an introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GenX 3.7.11 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../tutorials.html" >Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Data handling</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Matts Björck, 2020, Artur Glavic.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>